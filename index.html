<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js"></script>

<script>
  // Firebase 설정
  const firebaseConfig = {
  apiKey: "AIzaSyCH3vSrqGyazZ0n1Cs2QWFVCc1H1y7X6QI",
  authDomain: "money-record-8b8b0.firebaseapp.com",
  projectId: "money-record-8b8b0",
  storageBucket: "money-record-8b8b0.firebasestorage.app",
  messagingSenderId: "324461305541",
  appId: "1:324461305541:web:b1f2f9ba8d8595efd49aac"
  };

  // Firebase 초기화
  const app = firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  const amountInput = document.getElementById('amountInput');
  const amountList = document.getElementById('amountList');
  const addButton = document.getElementById('addButton');

  amountInput.addEventListener('keypress', function (event) {
    if (event.key === 'Enter') {
      addAmount();
    }
  });

  addButton.addEventListener('click', addAmount);

  function addAmount() {
    const amount = parseFloat(amountInput.value);
    if (!isNaN(amount) && amount > 0) {
      const date = new Date();
      const formattedDate = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;

      // Firebase에 저장
      const newEntryRef = database.ref('amounts').push();
      newEntryRef.set({
        amount: amount,
        date: formattedDate
      });

      addAmountToList(amount, formattedDate);
      amountInput.value = '';
    } else {
      alert('유효한 금액을 입력하세요!');
    }
  }

  function addAmountToList(amount, date) {
    const li = document.createElement('li');

    const amountText = document.createElement('span');
    amountText.textContent = `${amount.toLocaleString()} PHP`;

    const dateText = document.createElement('span');
    dateText.classList.add('details');
    dateText.textContent = `(${date})`;

    const deleteButton = document.createElement('button');
    deleteButton.textContent = '삭제';
    deleteButton.addEventListener('click', function () {
      li.remove();
    });

    li.appendChild(amountText);
    li.appendChild(dateText);
    li.appendChild(deleteButton);
    amountList.appendChild(li);
  }
</script>
